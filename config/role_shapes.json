{
  "metadata": {
    "version": "3.0",
    "description": "JSON schemas for AxPrototype (Creative Domain) - 3-Role Architecture",
    "last_updated": "2025-11-20",
    "phase": "Phase 2: AxPrototype Launch"
  },
  "Caller": {
    "description": "Role 0: Triage & Optimized Prompt Suggestion",
    "banned": ["I cannot", "As an AI"],
    "json_schema": {
      "oneOf": [
        {
          "description": "Option 1: Trivial Request - Terminate",
          "type": "object",
          "required": ["status", "response"],
          "properties": {
            "status": { "const": "terminate" },
            "response": { "type": "string" }
          }
        },
        {
          "description": "Option 2: Clear Complex Objective - Proceed",
          "type": "object",
          "required": ["status", "payload"],
          "properties": {
            "status": { "const": "proceed" },
            "payload": {
              "type": "object",
              "required": ["objective"],
              "properties": { "objective": { "type": "string" } }
            }
          }
        },
        {
          "description": "Option 3: Ambiguous - Suggest Optimized Prompt & Insight",
          "type": "object",
          "required": ["status", "suggested_objective", "axp_insight", "user_confirmation_question"],
          "properties": {
            "status": { "const": "suggest_optimized_prompt_and_insight" },
            "suggested_objective": { "type": "string" },
            "axp_insight": {
              "type": "object",
              "required": ["present", "title", "perspectives", "verdict"],
              "properties": {
                "present": { "const": true },
                "title": { "type": "string" },
                "perspectives": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": ["name", "description"],
                    "properties": {
                      "name": { "type": "string" },
                      "description": { "type": "string" }
                    }
                  },
                  "minItems": 3
                },
                "verdict": {
                  "type": "object",
                  "required": ["verdict_name", "reasoning"],
                  "properties": {
                    "verdict_name": { "type": "string" },
                    "reasoning": { "type": "string" }
                  }
                }
              }
            },
            "user_confirmation_question": { "type": "string" }
          }
        }
      ]
    }
  },
  "Builder": {
    "description": "Role 1: Consolidated Creator (Strategist + Analyst + Producer + Courier)",
    "banned": ["I hope this helps", "Let me know if", "As an AI language model"],
    "json_schema": {
      "type": "object",
      "required": ["builder_output"],
      "properties": {
        "builder_output": {
          "type": "object",
          "required": ["artifact", "self_notes"],
          "properties": {
            "artifact": {
              "type": "object",
              "required": ["strategy_brief", "content_assets", "delivery_plan"],
              "properties": {
                "strategy_brief": {
                  "type": "object",
                  "required": ["creative_concept", "target_audience", "brand_voice", "key_messaging_pillars"],
                  "properties": {
                    "creative_concept": { "type": "string" },
                    "target_audience": { "type": "string" },
                    "brand_voice": { "type": "string" },
                    "key_messaging_pillars": { "type": "array", "items": { "type": "string" } }
                  }
                },
                "content_assets": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": ["title", "format", "headline_variations", "body", "visual_cues"],
                    "properties": {
                      "title": { "type": "string" },
                      "format": { "type": "string" },
                      "headline_variations": { "type": "array", "items": { "type": "string" } },
                      "body": { "type": "string" },
                      "visual_cues": { "type": "string" }
                    }
                  }
                },
                "delivery_plan": {
                  "type": "object",
                  "required": ["recommended_channels", "timing_strategy", "success_metrics"],
                  "properties": {
                    "recommended_channels": { "type": "array", "items": { "type": "string" } },
                    "timing_strategy": { "type": "string" },
                    "success_metrics": { "type": "array", "items": { "type": "string" } }
                  }
                }
              }
            },
            "self_notes": {
              "description": "Internal context for the Critic. Not shown to user.",
              "type": "object",
              "required": ["strategic_rationale", "assumptions_made", "uncertainties", "analyst_check"],
              "properties": {
                "strategic_rationale": { "type": "string" },
                "assumptions_made": { "type": "array", "items": { "type": "string" } },
                "uncertainties": { "type": "array", "items": { "type": "string" } },
                "analyst_check": { "type": "string" }
              }
            }
          }
        }
      }
    }
  },
  "Critic": {
    "description": "Role 2: Editorial Gatekeeper & Red Team",
    "banned": ["Great job", "Nice work", "As an AI", "I think"],
    "json_schema": {
      "type": "object",
      "required": ["critic_output"],
      "properties": {
        "critic_output": {
          "type": "object",
          "required": ["verdict", "scores", "critique", "revision_instructions", "axp_insight", "afterthought_on_user_input"],
          "properties": {
            "verdict": {
              "type": "string",
              "enum": ["APPROVE", "REVISE"]
            },
            "scores": {
              "type": "object",
              "required": ["logical", "practical", "probable"],
              "properties": {
                "logical": { "type": "number", "minimum": 0, "maximum": 1 },
                "practical": { "type": "number", "minimum": 0, "maximum": 1 },
                "probable": { "type": "number", "minimum": 0, "maximum": 1 }
              }
            },
            "critique": {
              "type": "object",
              "required": ["strengths", "weaknesses", "critical_risks"],
              "properties": {
                "strengths": { "type": "array", "items": { "type": "string" } },
                "weaknesses": { "type": "array", "items": { "type": "string" } },
                "critical_risks": { "type": "array", "items": { "type": "string" } }
              }
            },
            "revision_instructions": {
              "type": "array",
              "description": "Specific instructions for the Builder if verdict is REVISE. Empty if APPROVE.",
              "items": { "type": "string" }
            },
            "axp_insight": {
              "type": "object",
              "required": ["present", "title", "perspectives", "verdict"],
              "properties": {
                "present": { "const": true },
                "title": { "type": "string" },
                "perspectives": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": ["name", "description"],
                    "properties": {
                      "name": { "type": "string" },
                      "description": { "type": "string" }
                    }
                  }
                },
                "verdict": {
                  "type": "object",
                  "required": ["verdict_name", "reasoning"],
                  "properties": {
                    "verdict_name": { "type": "string" },
                    "reasoning": { "type": "string" }
                  }
                }
              }
            },
            "afterthought_on_user_input": {
              "type": "object",
              "required": ["present", "message"],
              "properties": {
                "present": { "type": "boolean" },
                "message": { "type": "string" }
              }
            }
          }
        }
      }
    }
  }
}
